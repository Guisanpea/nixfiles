# Default config for sway
#
# Copy this to ~/.config/sway/config and edit it to your liking.
#
# Read `man 5 sway` for a complete reference.

# Your preferred terminal emulator
set $browser MOZ_ENABLE_WAYLAND=1 firefox
# Your preferred application launcher
# Note: pass the final command to swaymsg so that the resulting window can be opened
# on the original workspace that the command was run on.
set $menu dmenu_path | dmenu | xargs swaymsg exec --
set $menu rofi -modi drun -show drun | xargs swaymsg exec --

### Aesthetics

#Gaps
gaps inner 5
smart_gaps on

# Borders
default_border pixel 2
default_floating_border none
hide_edge_borders --i3 none

### Input config
#
#

input "1739:30385:DLL0945:00_06CB:76B1_Touchpad" {
    tap enabled
}

input "1241:840:DuckyChannel_International_Co.,_Ltd._Ducky_Keyboard" {
    xkb_layout us
    xkb_variant altgr-intl
    xkb_options caps:swapescape
    xkb_numlock enable
}


### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
output * bg ~/wallpaper.png fill
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
output "DP-2" pos 0 0 res 3840x2160 scale 2
output "HDMI-A-1" pos 1920 0 res 1920x1080 adaptive_sync on
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

### Key bindings
#
# Basics:
#

bindsym XF86AudioRaiseVolume exec amixer sset Master 5%+ | sed -En 's/.*\[([0-9]+)%\].*/\1/p' | head -1 > $WOBSOCK
bindsym XF86AudioLowerVolume exec amixer sset Master 5%- | sed -En 's/.*\[([0-9]+)%\].*/\1/p' | head -1 > $WOBSOCK
bindsym XF86AudioMute exec amixer sset Master toggle | sed -En '/\[on\]/ s/.*\[([0-9]+)%\].*/\1/ p; /\[off\]/ s/.*/0/p' | head -1 > $WOBSOCK

bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym XF86MonBrightnessUp exec brightnessctl set +5%
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86Search exec bemenu-run
bindsym Print exec grim -g "$(slurp)" - | swappy -f -

#
# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
bar {
    swaybar_command waybar
}

include /etc/sway/config.d/*

exec wmname LG3D

set $WOBSOCK $XDG_RUNTIME_DIR/wob.sock

# https://discourse.nixos.org/t/xdg-desktop-portal-not-working-on-wayland-while-kde-is-installed/20919/3

exec systemctl --user import-environment XDG_SESSION_TYPE XDG_CURRENT_DESKTOP
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
